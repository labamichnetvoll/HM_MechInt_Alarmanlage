<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Reisealarmanlage Steuerung</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f4ff;
      padding: 20px;
      text-align: center;
    }
    h1 {
      color: #2c3e50;
    }
    .status {
      margin: 20px 0;
      font-size: 18px;
    }
    select, button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 10px;
      border-radius: 6px;
    }
    .alarm {
      background-color: red;
      color: white;
      padding: 15px;
      font-weight: bold;
      display: none;
      border-radius: 8px;
    }
  </style>
</head>
<body>

  <h1>Reisealarmanlage</h1>

  <!-- Statusanzeigen -->
  <div class="status">
    <div><strong>Ger√§testatus:</strong> <span id="geraetStatus">MODUS W√ÑHLEN</span></div>
    <div><strong>Aktueller Modus:</strong> <span id="modusStatus">-</span></div>
    <div><strong>√úberwachung:</strong> <span id="ueberwachungStatus">INAKTIV</span></div>
  </div>

  <!-- Modusauswahl -->
  <label for="modus">Modus w√§hlen:</label>
  <select id="modus" onchange="modusWechseln()">
    <option value="waehlen">MODUS W√ÑHLEN</option>
    <option value="raum">RAUMCHECK</option>
    <option value="gepaeck">GEP√ÑCKCHECK</option>
  </select>

  <!-- √úberwachungssteuerung -->
  <div>
    <button onclick="starteUeberwachung()">üîí Starte √úberwachung</button>
    <button onclick="stoppeUeberwachung()">üîì Beende √úberwachung</button>
  </div>

  <!-- Alarmanzeige -->
  <div id="alarmBox" class="alarm">üö® ALARM!!!</div>

  <script>
    // Zust√§nde speichern
    let modus = "waehlen";
    let ueberwachungAktiv = false;

    function modusWechseln() {
      modus = document.getElementById("modus").value;

      // Anzeige aktualisieren
      document.getElementById("modusStatus").innerText = modus.toUpperCase();

      // Optional: an Arduino senden
      fetch("/modus?typ=" + modus);

      // Ger√§testatus √§ndern
      document.getElementById("geraetStatus").innerText =
        modus === "waehlen" ? "MODUS W√ÑHLEN" : modus.toUpperCase() + " AKTIV";
    }

    function starteUeberwachung() {
      ueberwachungAktiv = true;
      document.getElementById("ueberwachungStatus").innerText = "AKTIV";
      fetch("/start");

      // Optional: 5 Sekunden warten oder Animation anzeigen
      alert("√úberwachung gestartet f√ºr " + modus.toUpperCase());
    }

    function stoppeUeberwachung() {
      ueberwachungAktiv = false;
      document.getElementById("ueberwachungStatus").innerText = "INAKTIV";
      fetch("/stop");

      // Ger√§testatus zur√ºcksetzen
      document.getElementById("geraetStatus").innerText = "MODUS W√ÑHLEN";
    }

    // Beispiel: Alarm ausl√∂sen (dieser Teil wird normalerweise vom Ger√§t getriggert)
    function alarmAusloesen() {
      document.getElementById("alarmBox").style.display = "block";
    }

    // Beispiel: Alarm beenden
    function alarmZuruecksetzen() {
      document.getElementById("alarmBox").style.display = "none";
    }

    // Du kannst sp√§ter auch √ºber fetch('/alarm') oder WebSocket Alarmzustand anzeigen lassen
  </script>
</body>
</html>
